name: Reusable Setup

on:
  workflow_call:
    inputs:
      bun_version:
        required: true
        type: string
        description: 'The Bun version to use'

    outputs:
      bun_cache_key:
        description: 'The cache key for Bun dependencies'
        value: ${{ jobs.setup.outputs.bun_cache_key }}

jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
      - name: ⚙️ Setup Bun
        id: setup-bun
        uses: oven-sh/setup-bun@v1
        with:
          bun-version: ${{ inputs.bun_version }}

      - name: 📥 Install dependencies
        run: bun install --frozen-lockfile

      - name: Save Bun Cache Key
        id: cache-key
        run: echo "bun_cache_key=${{ steps.setup-bun.outputs.cache-hit }}" >> $GITHUB_OUTPUT

